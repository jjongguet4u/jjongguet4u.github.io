---
layout: post
title:  "2. 머신러닝 파이프라인의 이해"
subtitle:   "MLops2"
categories: in
tags: mlopsstudy
comments: true
---

# ML pipeline 개요

data수집 → model작동 → feedback → data수집 → ...

1. 데이터유입의 자동화
    1. 지속적인 재학습을 통한 정확도향상
2. 프로세스의 자동화
    1. 새로운 모델을 개발할 시간 이 없음

# ML 파이프라인

### 1. 수집

1. 다음 단계에서 사용할수 있도록 데이터를 처리함
2. 피쳐엔지니어링을 수행하지않음
- versioning :

    object storage(amazon s3, Google gcs ... ) ⇒ BUCKET

- Ingestion :

    Query를 시리얼화 ⇒ 동일한 qeury에 대해서 서로다른 데이터가 뽑히니까. 이를 기록함

### 2. 유효성검사

1. 새로운 데이터를 검증함
2. 새로운 데이터의 통계가 옳은지에 초점을 맞춤
- 데이터 검정이 제일중요함. 서버가 갑자기 돌아가지않는다던지. DB 스키마가 바뀌었다는지. 등등.. 데이터가 잘못될 가능성이 많은데, 이를 인지하지 못한 상태로 진행되면
- DB pipeline이 터지는경우도 발생할수있음

아니 세상에 random seed를 고정시키지않았다고? 뿌슝빠슝
하다못해 데이터를 5:5로 검정하는게 아니라, 6:4라던가 7:3으로 검정하면 어캄

### 3. 전처리

1. 모델을 학습하기 바로직전에 전처리하는것이 가장 합리적임
- 일반적으로 Data는 Vector형태로 들어오는데, Sequential로도 들어올수도 있고, tensor형태로 받을수 있게 무조건 전처리를 하는 과정이 필요한것이라는것
- batch 단위로 한꺼번에 하는게 제일 좋은거같음 ( DataLoader )

### 4-1. 학습

1. 파이프라인의 핵심.
2. 가능한 가장 낮은 오차를 사용하여 입력을 수행, 출력예측
3. 일반적으로 자원이 한정되어있기에, 모델훈련의 효율적인 분포가 중요함

### 4-2. 튜닝

1. 성능개선과 경쟁우위를 위한 모델튜닝과정
2. 다수의 모델을 병렬 or 순차적으로 학습시키는것이 가능

### 5. 분석

1. 모델이 여러 사용자 그룹에대해 어떻게 작동하는지를 파악
2. 피쳐에 대한 모델의 의존도 조사

### 6.버전관리

1. 학습한 모델, 하이퍼파라미터, 데이터 셋을 기록하고 관리하는것

아니 저번처럼학습했는데 왜 안되는거야 ...? 

### 7.모델배포

1. 모델을 학습 → 튜닝 분석  이후에 배포하는것
2. 일회성으로 구현된 모델이 많다면 배포하는게 쉽지않을테니 잘관리하기
- tfserving, pytorchserving

### 8. 피드백루프

1. 새로 배포된 모델의 효과와 성능을 측정하는것
2. 배포한 이후에 기록화 하는 단계